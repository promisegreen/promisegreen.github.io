<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Chen Nuo&#39;s blog</title>

  <!-- keywords -->
  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Chen Nuo&#39;s blog">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Chen Nuo&#39;s blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Chen Nuo">
<meta name="twitter:card" content="summary">
  
    <link rel="alternative" href="/atom.xml" title="Chen Nuo&#39;s blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/favicon.ico">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  

  
<script src="//cdn.bootcss.com/require.js/2.3.2/require.min.js"></script>

  
<script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>


  
<meta name="generator" content="Hexo 6.3.0"></head>
<body>
  <div id="container">
    <div id="particles-js"></div>
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
				<img lazy-src="" class="js-avatar">
			
		</a>

		<hgroup>
			<h1 class="header-author"><a href="/">Chen Nuo</a></h1>
		</hgroup>

		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">Home</a></li>
				        
							<li><a href="/archives">Archives</a></li>
				        
						</ul>
					</nav>
					<nav class="half-header-menu">
						<a class="hide">Home</a>
						<a>Tags</a>
						<a>Links</a>
						<a>About</a>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
						</div>
						<!-- music -->
						
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E9%A2%85%E5%86%85%E5%87%BA%E8%A1%80/" style="font-size: 10px;">深度学习 颅内出血</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://github.com/">github</a>
			        
			        </div>
				</section>
				

				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide"></h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author"></h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">Home</a></li>
		        
					<li><a href="/archives">Archives</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-基于EasyDL平台的颅内出血自动分类识别系统设计" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2023/09/02/%E5%9F%BA%E4%BA%8EEasyDL%E5%B9%B3%E5%8F%B0%E7%9A%84%E9%A2%85%E5%86%85%E5%87%BA%E8%A1%80%E8%87%AA%E5%8A%A8%E5%88%86%E7%B1%BB%E8%AF%86%E5%88%AB%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/" class="article-date">
  	<time datetime="2023-09-02T10:45:29.000Z" itemprop="datePublished">2023-09-02</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2023/09/02/%E5%9F%BA%E4%BA%8EEasyDL%E5%B9%B3%E5%8F%B0%E7%9A%84%E9%A2%85%E5%86%85%E5%87%BA%E8%A1%80%E8%87%AA%E5%8A%A8%E5%88%86%E7%B1%BB%E8%AF%86%E5%88%AB%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/">
        基于EasyDL平台的颅内出血自动分类识别系统设计
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h4><p>颅内出血（Intracranial Hemorrhage）是一种严重威胁人类健康生存的疾病，急性期的病死率高达30%-40%，并可导致严重的残疾。对患者进行计算机断层扫描（Computed Tomography），是诊断颅内出血的的第一步。颅内CT影像相似度较高，临床上进行识别较为困难，甚至会出现误诊的情况，从而导致后续的治疗方案产生偏差。本课题基于EasyDL开发平台，利用健康人群和不同类型颅内出血患者的CT影像资料，训练出颅内出血亚型自动分类模型。前端方面，使用Thunkable平台进行相应配套手机App的开发。此App在临床上可以有效辅助脑外科医生对颅内出血及其亚型进行诊断，从而降低疾病的误诊率，提升针对性救治措施的正确率。</p>
<p><strong>关键词</strong> 颅内出血；CT影像；深度学习；EasyDL</p>
<h2 id="绪论"><a href="#绪论" class="headerlink" title="绪论"></a>绪论</h2><h3 id="1-1-研究背景"><a href="#1-1-研究背景" class="headerlink" title="1.1 研究背景"></a>1.1 研究背景</h3><p>颅内出血是指非外伤性脑实质内血管破裂引起的出血，根据出血部位不同可分为硬膜外血肿（Epidural Hemorrhage)、硬膜下血肿(Subdural Hemorrhage)、蛛网膜下腔出血(Subarachnoid Hemorrhage)、脑实质内出血（Intraparenchymal Hemorrhage）和脑室出血（Intraventricular Hemorrhage)。颅内出血占全部脑卒中的20%～30%[1]</p>
<p>随着现代医学检测方法的不断发展和进步 ,CT技术以其快速、准确和无创的特点 , 在诊断颅内出血疾病中起到了重要的作用.然而 ,CT技术的广泛应用 ,为治疗患者提供便利的同时 ,也为医生带来了挑战.目前，影像科医生每天需要大量阅读CT影像，从中发现病灶，为数众多的CT影像增大了漏诊和误诊的风险，尤其对于蛛网膜下腔出血和硬脑膜下出血，人工CT影像诊断具有难度高，主观性强，用时长的缺点。这将会贻误最佳的救治时机，提高病人的死亡率。</p>
<p>这既是严峻的挑战，但同时也为疾病诊疗模式的变革带来了机遇。深度学习(Deep Learning)技术通过建立类似于人脑的分层结构模型，可以从输入数据中提取其本质特征，建立出底层信号和高层语义的映射关系。从而可以从大量的训练样本中得出其中所蕴含的统计规律，对未知的新数据做出某种预测或判断[2]。随着计算机硬件技术的蓬勃发展，人类的计算能力有了空前的提高，得益于此，深度学习模型训练困难的问题也得到了较好的解决。深度学习也随之迎来了巨大的发展，技术在医疗，工程，经济金融建模等实际生产领域中发挥了强有力的作用。</p>
<p>2018年，Chilamkurthy等人发明了一种识别颅内出血类型的新算法，该算法采集了20个医疗机构中共313 318例颅内出血患者的头部CT影像，并随机选择23 263例作为验证集，剩余290055例作为训练集。同时另采集不同来源的491例头部CT图像作为测试集。结果表明，该算法可以判断5种颅内出血的不同亚型，并且具有较高的正确率。[3]上述例子表明，人工智能（Artificial Intelligence，AI）技术对CT影像的识别相较传统人工识别方法具有准确快速的优点，值得在医疗影像识别领域中普及推广。</p>
<p>深度学习的热潮使得各大高科技公司纷纷推出了自己的一站式深度学习平台，诸如谷歌的Cloud AutoML，百度飞桨EsayDL，华为ModelArts等[4]。其中EasyDL平台基于国内最早开源的飞桨深度学习框架而来，该平台以其轻量化，定制化，低代码[5]，预训练模型丰富等优势，可以帮助各领域相关研究人员在短时间内完成数据集上传，模型训练，发布及接入的全流程，仅需少量训练数据就可得到性能优良的模型，这无疑大大降低了深度学习技术的使用门槛，也完全符合本课题研究所需。</p>
<p>基于此，本课题采用EasyDL作为模型创建训练的平台，并此基础上，使用Thunkable模块化App开发平台开发相应的配套软件，以作为用户使用模型进行识别的终端产品。</p>
<h3 id="1-2-研究目的"><a href="#1-2-研究目的" class="headerlink" title="1.2 研究目的"></a>1.2 研究目的</h3><p>本课题旨在设计一套能根据颅内CT影像自动对影像中的颅内出血亚型进行快速判断的图像分类识别系统。该系统在临床上可以有效辅助影像科医生判断CT扫描者是否患有颅内出血及患有的颅内出血亚型，且具有快速准确的特点另一方面，该系统也旨在作为教学辅助工具，在医学院中帮助广大师生更好地教与学。</p>
<h2 id="研究过程"><a href="#研究过程" class="headerlink" title="研究过程"></a>研究过程</h2><h3 id="2-1-总体研究方案"><a href="#2-1-总体研究方案" class="headerlink" title="2.1 总体研究方案"></a>2.1 总体研究方案</h3><p>本课题从结构上可以分成数据端，模型端，应用端三大部分。总体研究方案架构如图1所示。其中数据端就是模型训练所需要的CT影像数据集，共包含“硬膜外血肿数据集”，“硬膜下血肿数据集”，“蛛网膜下腔出血数据集”，“脑实质内出血数据集”，“脑室出血数据集”和“无明显颅内出血数据集”六部分组成。数据端的详细预处理过程见2.2节所示。模型端就是最终执行CT影像分类识别功能的深度学习模型，该模型在EasyDL平台上创建、训练并发布而成，详见2.3与2.4节。应用端是模型与用户的连接桥梁，以手机App的形式呈现，用户可以在系统图库中选取所需要识别的CT影像，而后通过App的图像选择模块上传至App，最后以Https协议中的POST请求形式发送至模型进行识别并返回识别结果。</p>
<p><img src="/2023/09/02/%E5%9F%BA%E4%BA%8EEasyDL%E5%B9%B3%E5%8F%B0%E7%9A%84%E9%A2%85%E5%86%85%E5%87%BA%E8%A1%80%E8%87%AA%E5%8A%A8%E5%88%86%E7%B1%BB%E8%AF%86%E5%88%AB%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/1.png"></p>
<h3 id="2-2-数据集预处理"><a href="#2-2-数据集预处理" class="headerlink" title="2.2 数据集预处理"></a>2.2 数据集预处理</h3><h4 id="2-2-1-数据集情况说明"><a href="#2-2-1-数据集情况说明" class="headerlink" title="2.2.1 数据集情况说明"></a>2.2.1 数据集情况说明</h4><p>本项目研究过程中所用RSNA Intracranial Hemorrhage数据集由北美放射学会（RSNA）发布并授权自由使用。下载并初步整理该数据集后，可发现该数据集包含trian_images文件夹和train.csv文件两部分。trian_images文件夹存储了包含绪论中所述的五种颅内出血类型CT影像图片并健康的颅内CT影像共计674000张，其每张图片的命名格式为ID_xxxxxxxxx.png，其中xxxxxxxxx为由阿拉伯数字与小写英文字母组合而成的9位长度字符串，表示为患者的记录号，该记录号具有唯一性。train.csv文件是一个表格文件，记录了该数据集的元信息，共有4045548行，2列。其列名为ID 与Label，ID列的格式为“ID_xxxxxxxxx_yyyy”，其中xxxxxxxxx即是上文所述的患者记录号，yyyy表示某一种颅内出血的类型，在该数据集中，yyyy的取值一共有epidural,intraparenchymal,intraventricular,subarachnoid,subdural,any 6种。Label为整数列，取值为0或1，1表示患有颅内出血，0则表示患者健康。举例见下表：</p>
<p><strong>表1. 数据格式说明（以86618ebd6为例）</strong></p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Label</th>
</tr>
</thead>
<tbody><tr>
<td>ID_86618ebd6_epidural</td>
<td>0</td>
</tr>
<tr>
<td>ID_86618ebd6_intraparenchymal</td>
<td>0</td>
</tr>
<tr>
<td>ID_86618ebd6_intraventricular</td>
<td>0</td>
</tr>
<tr>
<td>ID_86618ebd6_subarachnoid</td>
<td>0</td>
</tr>
<tr>
<td>ID_86618ebd6_subdural</td>
<td>1</td>
</tr>
<tr>
<td>ID_86618ebd6_any</td>
<td>1</td>
</tr>
</tbody></table>
<p>上表说明，记录号为86618ebd6的患者患有subdural类型的颅内出血，不患有其他类型的颅内出血。ID_86618ebd6_any行的Label值为1表明该患者必定患有某一种类型的颅内出血。</p>
<h4 id="2-2-2-CSV文件处理"><a href="#2-2-2-CSV文件处理" class="headerlink" title="2.2.2 CSV文件处理"></a>2.2.2 CSV文件处理</h4><p>利用Python的pandas数据分析包，将train.csv文件导入为DataFrame结构并命名为CT_data。检查数据是否存在缺失，结果显示并无缺失值，数据完整程度良好。</p>
<p>如上节所述，目前CT_data的ID列混合了患者记录号和6中颅内出血类型，这样的结构不利于后续研究，因此使用pandas中的Series.str.split方法将ID列按照患者记录号及颅内出血类型进行分割，生成新的pid列与sub_type列，分别表示患者记录号与颅内出血亚型。分割完成后的数据格式如下表：</p>
<p><strong>表2. 处理后的数据格式说明（以86618ebd6为例）</strong></p>
<table>
<thead>
<tr>
<th>pid</th>
<th>sub_type</th>
<th>Label</th>
</tr>
</thead>
<tbody><tr>
<td>86618ebd6</td>
<td>epidural</td>
<td>0</td>
</tr>
<tr>
<td>86618ebd6</td>
<td>intraparenchymal</td>
<td>0</td>
</tr>
<tr>
<td>86618ebd6</td>
<td>intraventricular</td>
<td>0</td>
</tr>
<tr>
<td>86618ebd6</td>
<td>subarachnoid</td>
<td>0</td>
</tr>
<tr>
<td>86618ebd6</td>
<td>subdural</td>
<td>1</td>
</tr>
<tr>
<td>86618ebd6</td>
<td>any</td>
<td>1</td>
</tr>
</tbody></table>
<p>完成数据的分割处理后，再一次检查数据中是否存在异常值。利用DataFrame.groupby方法将数据按照pid列进行分组，并检查每组中的数据量。结果显示，pid为921490062，a64d5deed，854fba667，489ae4179的四组数据中每组均有12行数据量，这与每组6行的正常数据量不符，因此按该4个pid删除其所对应的数据。至此，数据整理完毕，目前的数据中已无异常值与缺失值。</p>
<h4 id="2-2-3-CT影像重命名"><a href="#2-2-3-CT影像重命名" class="headerlink" title="2.2.3 CT影像重命名"></a>2.2.3 CT影像重命名</h4><p>为了后续CT_data的pid列中的患者记录号能与train_images文件夹中的CT影像更加快速进行匹配，利用python os库的rename方法将文件夹中的图片由ID_xxxxxxxxx.png批量化重命名为xxxxxxxxx.png。重命名后的CT影像如下图所示：</p>
<p><img src="/2023/09/02/%E5%9F%BA%E4%BA%8EEasyDL%E5%B9%B3%E5%8F%B0%E7%9A%84%E9%A2%85%E5%86%85%E5%87%BA%E8%A1%80%E8%87%AA%E5%8A%A8%E5%88%86%E7%B1%BB%E8%AF%86%E5%88%AB%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/2.png"></p>
<p><strong>图2. 重命名后的颅内出血CT影像图片（部分）</strong></p>
<h4 id="2-2-4-训练集生成"><a href="#2-2-4-训练集生成" class="headerlink" title="2.2.4 训练集生成"></a>2.2.4 训练集生成</h4><p>重命名后的CT影像图片并没有按照不同的颅内出血类型进行分类，仅凭患者记录号pid无法确定该图像所属的出血亚型，出血亚型信息被存储在分割后的CT_data的sub_type列中。因此，为了实现按照颅内出血亚型将CT影像分类的目的，需要在CT_data中找出2.2.1节中所述的6种亚型（包含any）都分别对应了哪些患者记录号pid。为了实现该需求，可以对Label列与sub_type列进行联合筛选，比如：</p>
<p><strong>代码片段1. 颅内出血亚型分类的筛选逻辑</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">healthy_pid = CT_data[(Ct_data.Label == <span class="number">0</span>) &amp; (CT_data.sub_type==”<span class="built_in">any</span>”)].pid</span><br></pre></td></tr></table></figure>


<p>上述代码片段所提供的筛选条件可以一次性找出所有不患有颅内出血的患者记录号。其余亚型亦可按相同逻辑类推得到。</p>
<p>在得到每种亚型的患者记录号后，经统计，无明显颅内出血的患者记录号有577171例，epidural亚型1497例，intraparenchymal亚型13932例，intraventricular亚型8914例，subarachnoid亚型14717例，subdural亚型28909例。</p>
<p>大数据集的训练存在训练时间过长，算力耗费巨大，后期难以维护等问题，因此基于简便易用的考虑，可酌情从上述分类后的患者记录号中随机抽取一部分。利用Series.sample方法进行随机不放回抽样，抽取健康亚型，intraparenchymal亚型，subarachnoid亚型，subdural亚型各10000例，epidural亚型1400例，intraventricular亚型8000例，共计49400例。<br>抽样完成后，利用Python的shutil库将每个记录号所对应的CT影像分别复制至所属类别的新建文件夹中，最后共得到2.1节中所述6个数据集共计49400张颅内出血CT影像图片。</p>
<h3 id="2-3-模型训练与API接入"><a href="#2-3-模型训练与API接入" class="headerlink" title="2.3 模型训练与API接入"></a>2.3 模型训练与API接入</h3><h4 id="2-3-1模型的建立与训练"><a href="#2-3-1模型的建立与训练" class="headerlink" title="2.3.1模型的建立与训练"></a>2.3.1模型的建立与训练</h4><p>在训练集准备完毕后，为了能使得APP具有能自动识别颅内CT并进行分类的核心功能，仍然需要创建合适的图像分类模型。在EasyDL中创建一个新的图像分类模型，将此模型命名为“颅内出血CT影像分类模型”就完成了模型的初步建立。模型创建成功后，还没有任何数据。此时，需要将在2.2.4节中所述的训练集上传至EasyDL平台，并将其命名为“颅内出血CT影像数据集”。数据导入完成后，原数据集中总计49400张CT影像存留48941张。</p>
<p>数据集上传完成后，将其导入至模型并开始训练模型。模型训练时间由数据集大小决定，本课题所用数据集单个模型的训练时间在42小时左右。</p>
<h4 id="2-3-2-模型的发布与接入"><a href="#2-3-2-模型的发布与接入" class="headerlink" title="2.3.2 模型的发布与接入"></a>2.3.2 模型的发布与接入</h4><p>模型训练完成后，可以通过在线应用程序接口（Application Programming Ingterface，API）的方式进行调用，也可以通过离线软件开发工具包（Software Development Kit，SDK）的方式。出于减轻应用端压力，力求其轻量化的考虑，本课题采用了使用API的方式对模型进行调用。为此，只需在EasyDL平台中将模型的部署方式设置为公有云部署后进行发布，发布申请在审核后，将会生成可调用的模型接口地址。为了便于移动端App或者客户端程序对该模型进行访问，需要进一步在百度智能云平台中为发布完成的模型建立一个应用，并将该应用命名为“颅内出血CT影像识别”，该应用的作用在于可以为第三方程序调用模型时提供鉴权验证的安全保护机制。</p>
<p>EasyDL平台提供了发布后的模型接受调用的API文档。第三方应用在调用模型时，需要通过Https协议的POST请求进行访问，并需要通过百度鉴权认证机制以获取合法的鉴权验证码access_token。access_token的获取依赖于“颅内出血CT影像识别”中所生成的API Key与Secret Key。成功获取鉴权验证码后，将其作为模型接口地址的URL参数，同时将请求头（Https Headers）的Content-Type参数的值设置为application&#x2F;json,此外还需将所要识别的CT影像进行base64编码或对其进行在线存储，最后将编码结果或图像存储地址以JSON（JavaScript Object Notaion）字符串的形式设置为本次Https请求的请求体（Https Body）。</p>
<p>以上请求过程在应用端的实现代码如下所示：</p>
<p><strong>代码片段2.  App中调用模型</strong></p>
<p><img src="/2023/09/02/%E5%9F%BA%E4%BA%8EEasyDL%E5%B9%B3%E5%8F%B0%E7%9A%84%E9%A2%85%E5%86%85%E5%87%BA%E8%A1%80%E8%87%AA%E5%8A%A8%E5%88%86%E7%B1%BB%E8%AF%86%E5%88%AB%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/3.png"></p>
<h3 id="2-4-前端配套软件设计方案"><a href="#2-4-前端配套软件设计方案" class="headerlink" title="2.4 前端配套软件设计方案"></a>2.4 前端配套软件设计方案</h3><p>本课题也为所设计的系统开发了一款配套的手机App，以便于终端用户可以快速调用模型。该配套软件的核心功能模块是CT影像识别模块，当用户在主页面中App中传入所需要识别的CT影像后，点击识别按钮便可发起对模型的Https请求，模型在收到请求并确认请求鉴权合法后就会以JSON字符串形式对原地址进行响应，利用Thunkable开发平台自带的Web组件对该响应进行JSON解析，完毕后页面将会自动跳转至“识别结果页面”，用户即可得到模型的识别结果。</p>
<p>在识别结果页面中，App将会显示本次识别结果的亚型名称及其置信度，并且可点击右侧的研究图标将识别结果作为超链接参数导航至百度学术网站，这一功能的设计方便了有关医护人员及师生在使用App时可以快速地对所识别出的亚型尽心研究学习。</p>
<p>除此之外，为了便于需要时查找，App还另外设计实现了识别记录保存与查找模块，用户可在上述识别结果页面点击“保存识别结果”按钮对本次识别结果进行保存。保存成功后会生成6位的记录码，用户可按照该记录码在记录保存页面对记录进行查找。当点击所查找的记录栏时，页面将会再次跳转至识别结果页面。</p>
<p>App的设计原型图如下所示：</p>
<p><img src="/2023/09/02/%E5%9F%BA%E4%BA%8EEasyDL%E5%B9%B3%E5%8F%B0%E7%9A%84%E9%A2%85%E5%86%85%E5%87%BA%E8%A1%80%E8%87%AA%E5%8A%A8%E5%88%86%E7%B1%BB%E8%AF%86%E5%88%AB%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/4.png"></p>
<p><strong>图3. 配套App软件主页面设计原型图</strong></p>
<p><img src="/2023/09/02/%E5%9F%BA%E4%BA%8EEasyDL%E5%B9%B3%E5%8F%B0%E7%9A%84%E9%A2%85%E5%86%85%E5%87%BA%E8%A1%80%E8%87%AA%E5%8A%A8%E5%88%86%E7%B1%BB%E8%AF%86%E5%88%AB%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/5.png"></p>
<p><strong>图4. 配套App软件识别结果页面设计原型图</strong></p>
<p><img src="/2023/09/02/%E5%9F%BA%E4%BA%8EEasyDL%E5%B9%B3%E5%8F%B0%E7%9A%84%E9%A2%85%E5%86%85%E5%87%BA%E8%A1%80%E8%87%AA%E5%8A%A8%E5%88%86%E7%B1%BB%E8%AF%86%E5%88%AB%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/6.png"></p>
<p><strong>图5. 配套App软件记录保存页面设计原型图</strong></p>
<p><img src="/2023/09/02/%E5%9F%BA%E4%BA%8EEasyDL%E5%B9%B3%E5%8F%B0%E7%9A%84%E9%A2%85%E5%86%85%E5%87%BA%E8%A1%80%E8%87%AA%E5%8A%A8%E5%88%86%E7%B1%BB%E8%AF%86%E5%88%AB%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/7.png"></p>
<p><strong>图6. 配套App软件研究页面设计原型图</strong></p>
<h2 id="研究结果"><a href="#研究结果" class="headerlink" title="研究结果"></a>研究结果</h2><h3 id="3-1-模型评估方法"><a href="#3-1-模型评估方法" class="headerlink" title="3.1 模型评估方法"></a>3.1 模型评估方法</h3><p>为了检验模型的泛化能力，需要用未知样本对模型进行测试，并且提出一系列的评估指标对其进行评估。对于执行分类功能的深度学习模型，可以根据样本的真实类别及模型预测的类别相互组合情形，将预测结果分成TP（True Positive），TN（True Negative），FP（False Positive），FN（False Negative）四类。其中TP表示实际为正类并且被预测为正类的样本数，TN表示实际为负类而被预测为负类的样本数，FP表示实际为负类而被预测为正类的样本数，FN表示实际为正类而被预测为负类的样本数。</p>
<p>常用的分类模型性能评估指标有准确率（Accuracy），精确率(Precison)，召回率(Recall)$F_\alpha$以及值。其中准确率表示正确分类的样本数占总样本数的比例，计算公式为：$ACC&#x3D;\frac{TP+TN}{TP+TN+FP+FN}$；精确率表示正确分类的正类样本占预测为正类的样本的比例，计算公式为：$Pre&#x3D; \frac{TP}{TP+FP}$；召回率表示正确分类的正类样本占正确分类的样本的比例，计算公式为：$Rec&#x3D;\frac{TP}{TP+FN}$ 。准确率具有通俗易懂，计算方便的优点，是最简单的分类模型评价指标，但在测试样本有较大不平衡的情况下，并不能很好地作为分类指标。精确率和召回率一定程度上弥补了准确率指标的不足，但精确率与召回率往往不可兼得，经常出现顾此失彼的现象，为了平衡二者，便有了分类模型中最常用的值指标，其取值范围为，越大则表明模型的性能越优良。$F_\alpha$值的计算公式为：</p>
<p>$$F_\alpha &#x3D; \frac{(\alpha^2+1)Pre\cdot Rec}{\alpha^2\cdot Pre+Rec}$$</p>
<p>其中 $\alpha$ 为权重系数，当 $\alpha &#x3D;1$ 时计算得到得值称为 $F1-Score$ ，表明精确率和召回率具有同等的重要性。$F1-Score$ 往往用于二分类模型的评估，当模型是多分类时，测试样本中针对某一类别的正负类样本分布往往是不平衡的，这将会导模型的召回率偏低。从而进一步造成$F1-Score$得分偏低。为了解决这个问题，多分类模型的 $F_\alpha$ 值指标需要采用更小的 $\alpha$ 权重，以提高精确率 $F_\alpha$ 值中的权重。</p>
<h3 id="3-2-模型测试结果"><a href="#3-2-模型测试结果" class="headerlink" title="3.2 模型测试结果"></a>3.2 模型测试结果</h3><p>本课题采集模型训练集之外CT影像图片作为模型的测试集，每种分类各50张，共计300张。测试结果的混淆矩阵见下表所示：</p>
<p><strong>表3. 模型测试结果混淆矩阵</strong></p>
<table>
<thead>
<tr>
<th></th>
<th>硬膜外血肿</th>
<th>硬膜下血肿</th>
<th>蛛网膜下腔出血</th>
<th>脑实质内出血</th>
<th>脑室出血</th>
<th>无明显颅内出血</th>
</tr>
</thead>
<tbody><tr>
<td>硬膜外血肿</td>
<td>47</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>硬膜下血肿</td>
<td>3</td>
<td>49</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>蛛网膜下腔出血</td>
<td>0</td>
<td>0</td>
<td>50</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>脑实质内出血</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>48</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>脑室出血</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>49</td>
<td>0</td>
</tr>
<tr>
<td>无明显颅内出血</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>50</td>
</tr>
</tbody></table>
<p>通过该矩阵可以发现，蛛网膜下腔出血和无明显颅内出血两种类型全部识别正确；硬膜外血肿类别中正确47张，3张被识别为硬膜外血肿；硬膜下血肿类别中正确49张，1张被识别为硬膜外血肿；脑室出血类别中正确49张，1张被识别为蛛网膜下腔出血；脑实质出血正确48张，其中1张被识别为硬膜外血肿，另一张被识别为硬膜下血肿。可以按类别分别计算每种类型的准确率，精确率，召回率和F0.2-Sscore，如下表所示：</p>
<p><strong>表4. 模型测试结果指标</strong></p>
<table>
<thead>
<tr>
<th></th>
<th>精确率</th>
<th>召回率</th>
<th>F0.2-Score</th>
</tr>
</thead>
<tbody><tr>
<td>硬膜外血肿</td>
<td>95.92%</td>
<td>15.93%</td>
<td>0.8039</td>
</tr>
<tr>
<td>硬膜下血肿</td>
<td>92.45%</td>
<td>16.61%</td>
<td>0.7864</td>
</tr>
<tr>
<td>蛛网膜下腔出血</td>
<td>98.04%</td>
<td>16.72%</td>
<td>0.8259</td>
</tr>
<tr>
<td>脑实质内出血</td>
<td>100%</td>
<td>16.11%</td>
<td>0.8331</td>
</tr>
<tr>
<td>脑室出血</td>
<td>100%</td>
<td>16.39%</td>
<td>0.8360</td>
</tr>
<tr>
<td>无明显颅内出血</td>
<td>100%</td>
<td>16.67%</td>
<td>0.8387</td>
</tr>
<tr>
<td>平均</td>
<td>97.74%</td>
<td>16.41%</td>
<td>0.8207</td>
</tr>
</tbody></table>
<h2 id="研究结论"><a href="#研究结论" class="headerlink" title="研究结论"></a>研究结论</h2><h3 id="4-1-研究局限性"><a href="#4-1-研究局限性" class="headerlink" title="4.1 研究局限性"></a>4.1 研究局限性</h3><h4 id="4-1-1-应用端局限性"><a href="#4-1-1-应用端局限性" class="headerlink" title="4.1.1 应用端局限性"></a>4.1.1 应用端局限性</h4><p>由于时间紧迫，本课题配套的前端App作为用户与模型之间的沟通桥梁，在CT影像上传模块的开发中，仅只实现了单图片上传，尚不能实现批量上传与识别。这是在本课题的后续研究中需要加以解决的。</p>
<h4 id="4-1-2-模型局限性"><a href="#4-1-2-模型局限性" class="headerlink" title="4.1.2 模型局限性"></a>4.1.2 模型局限性</h4><p>鉴于颅内CT影像具有高度的相似性及复杂性，模型在训练完成后的性能表现极大地依赖于数据集的质量。本课题所采用数据集来自北美放射学会RSNA，系CT影像原像，因此本课题所训练之模型对于CT影像原像的识别效果良好，但是对于由手机等设备针对CT影像原片所拍摄而得的“二次CT影像”则不具备良好的泛化效果，识别结果具有一定的误差。造成该局限性的根本原因在于，在课题研究过程中，由于现实条件的制约，导致缺乏上文所述的“二次CT影像”资料所造成。为了最大程度上避免该局限性，在App开发过程中取消了图片拍摄模块，用户不能使用手机拍摄的上传CT影像。</p>
<h3 id="4-2-未来计划"><a href="#4-2-未来计划" class="headerlink" title="4.2 未来计划"></a>4.2 未来计划</h3><p>随着互联网的发展，用户产品的终端除了传统的桌面客户端和移动端App以外，还出了浏览器端，小程序端等多种形式。其中小程序端以其开发简单，无需安装等特点[6]，渐渐成为了互联网产品的主流之一。本课题拟在后续研究开发中将系统以“多终端”形式展现，着重开发小程序端，以期用户可以以多途径接触使用本系统。</p>
<p>另外，后续研究也将逐渐采集由多种不同姿态，光照，角度拍摄下的“非标准”CT影像图片，作为训练集的扩充，使模型具有更好的健壮性和适应性。</p>
<h3 id="4-3-研究意义与结论"><a href="#4-3-研究意义与结论" class="headerlink" title="4.3 研究意义与结论"></a>4.3 研究意义与结论</h3><p>本课题设计的颅内出血亚型自动识别系统具有识别时间短，识别精度高的特点，能帮助一线医护人员进行快速分诊，切实减缓其工作压力，提高工作效率，在临床上具有较大的应用价值。同时，应用端App的设计也使得本系统易于使用，CT影像可通过网络数据的形式在端与端之间进行传输，从而打破了实体影像的空间限制，为网络问诊，在线识别等新兴医疗模式的实现提供了可能的方式。</p>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p>[1]李玉霞. (2010). 中西医结合治疗脑出血的现状及进展. 陕西中医, 31(009), 1266-1268.</p>
<p>[2]余凯, 贾磊, 陈雨强, &amp; 徐伟. (2013). 深度学习的昨天、今天和明天. 计算机研究与发展, 50(9), 6.</p>
<p>[3]Chilamkurthy, S. ,  Ghosh, R. ,  Tanamala, S. ,  Biviji, M. ,  Campeau, N. G. , &amp;  Venugopal, V. K. , et al. (2018). Development and validation of deep learning algorithms for detection of critical findings in head ct scans.</p>
<p>[4]谭新宁, 吴文如, 梁婉晴, 陈浩文, 赵凯莹, &amp; 张睿. (2022). 定制化ai训练平台easydl在青葙子及其混伪品图像分类中的应用. 中国民族民间医药(015), 031.</p>
<p>[5]冯喆, &amp; 张强. (2022). 低代码开发平台在企业数字化转型中的应用研究. 互联网周刊(10), 13-15.</p>
<p>[6]朱玉强. (2017). 微信小程序在图书馆移动服务中的应用实践——以排架游戏为例. 图书馆论坛, 37(7), 7.</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E9%A2%85%E5%86%85%E5%87%BA%E8%A1%80/" rel="tag">深度学习 颅内出血</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
      <div class="footer-left">
        &copy; 2023 Chen Nuo
      </div>
        <div class="footer-right">
          <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/preccrep/hexo-theme-jelly" target="_blank">Jelly</a>
        </div>
    </div>
  </div>
</footer>
    </div>
    
  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">



<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: false,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>

<script src="/js/main.js"></script>




  </div>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>

</body>
</html>